<!DOCTYPE HTML>
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:p="http://primefaces.org/ui">
<h:head>
</h:head>

<h:body>
	<!--http://primefaces.org/showcase/ui/data/datatable/expansion.xhtml?jfwid=1c262-->
	<!--http://primefaces.org/showcase/ui/data/datatable/crud.xhtml?jfwid=1c262-->
	<h:form id="form">
		<div class="card crud-demo">
			<p:growl id="messages" showDetail="true"/>
	
			<p:toolbar>
				<p:toolbarGroup>
					<p:commandButton 	value="New" 
										icon="pi pi-plus" 
										actionListener="#{meusLivrosController.openNew}"
									 	update=":form:manage-livro-content" 
										oncomplete="PF('managelivroDialog').show()"
									 	styleClass="ui-button-success" 
										style="margin-right: .5rem">
						<p:resetInput target=":form:manage-livro-content"/>
					</p:commandButton>
				</p:toolbarGroup>
			</p:toolbar>
	
			<p:dataTable 	id="dt-livros" 
							widgetVar="dtlivros" 
							var="livro" 
							value="#{meusLivrosController.livros}"
						 	reflow="true" 
							styleClass="livros-table"
						 	selection="#{meusLivrosController.selectedlivros}" 
							rowKey="#{livro.id}" 	
							paginator="true"
						 	rows="10" 	
							rowSelectMode="add" 
							paginatorPosition="bottom">
				<f:facet autor="header">
					<div class="livros-table-header">
						<span style="font-weight: bold">livroS</span>
	
						<span class="filter-container ui-input-icon-left">
							<i class="pi pi-search"></i>
							<p:inputText id="globalFilter" onkeyup="PF('dtlivros').filter()" placeholder="Search"/>
						</span>
	
					</div>
				</f:facet>
	
				<p:ajax event="rowSelect" update=":form:delete-livros-button"/>
				<p:ajax event="rowUnselect" update=":form:delete-livros-button"/>
				<p:ajax event="rowSelectCheckbox" update=":form:delete-livros-button"/>
				<p:ajax event="rowUnselectCheckbox" update=":form:delete-livros-button"/>
				<p:ajax event="toggleSelect" update=":form:delete-livros-button"/>
	
				<p:column selectionMode="multiple" exportable="false"></p:column>
	
				<p:column headerText="titulo" sortBy="#{livro.titulo}" filterBy="#{livro.titulo}">
					<h:outputText value="#{livro.titulo}"/>
				</p:column>
				<p:column headerText="autor" sortBy="#{livro.autor}" filterBy="#{livro.autor}">
					<h:outputText value="#{livro.autor}"/>
				</p:column>
				<p:column headerText="edicao" sortBy="#{livro.edicao}">
					<h:outputText value="#{livro.edicao}" style="font-weight: 700">
						<f:convertNumber currencySymbol="$" type="currency"/>
					</h:outputText>
				</p:column>
				<p:column headerText="Genero" sortBy="#{livro.Genero}" filterBy="#{livro.Genero}">
					<h:outputText value="#{livro.Genero}"/>
				</p:column>

				<p:column exportable="false">
					<p:commandButton 	icon="pi pi-pencil" 
										update=":form:manage-livro-content"
									 	oncomplete="PF('managelivroDialog').show()"
									 	styleClass="edit-button rounded-button ui-button-success" 
										process="@this">
						<f:setPropertyActionListener value="#{livro}" target="#{meusLivrosController.selectedlivro}"/>
						<p:resetInput target=":form:manage-livro-content"/>
					</p:commandButton>
					<p:commandButton class="ui-button-warning rounded-button" icon="pi pi-trash" process="@this"
									 oncomplete="PF('deletelivroDialog').show()">
						<f:setPropertyActionListener value="#{livro}" target="#{meusLivrosController.selectedlivro}"/>
					</p:commandButton>
				</p:column>
	
			</p:dataTable>
	
			<p:dialog 	header="livro Details" 
						showEffect="fade" 
						modal="true"
					  	widgetVar="managelivroDialog" 
						responsive="true">
				<p:outputPanel id="manage-livro-content" class="ui-fluid">
					<p:outputPanel rendered="#{not empty meusLivrosController.selectedlivro}">
						
						<div class="p-field">
							<p:outputLabel for="titulo">titulo</p:outputLabel>
							<p:inputText id="titulo" value="#{meusLivrosController.selectedlivro.titulo}" required="titulo"/>
						</div>
						<div class="p-field">
							<p:outputLabel for="sinopse">sinopse</p:outputLabel>
							<p:inputTextarea id="sinopse" value="#{meusLivrosController.selectedlivro.sinopse}"/>
						</div>
						<div class="p-field">
							<p:outputLabel for="edicao">edicao</p:outputLabel>
							<p:inputTextarea id="edicao" value="#{meusLivrosController.selectedlivro.edicao}"/>
						</div>
						<div class="p-field">
							<p:outputLabel for="Genero">Genero</p:outputLabel>
							<p:selectOneRadio id="Genero" value="#{meusLivrosController.selectedlivro.Genero}"
											  layout="responsive" columns="2">
								<f:selectItem itemLabel="Acao" itemValue="Accessories"/>
								<f:selectItem itemLabel="aventura" itemValue="Clothing"/>
								<f:selectItem itemLabel="romance" itemValue="Electronics"/>
								<f:selectItem itemLabel="ficcao" itemValue="Fitness"/>
								<f:selectItem itemLabel="terro" itemValue="Fitness"/>
								<f:selectItem itemLabel="poesia" itemValue="Fitness"/>
							</p:selectOneRadio>
						</div>

					</p:outputPanel>
				</p:outputPanel>
	
				<f:facet autor="footer">
					<p:commandButton value="Save" icon="pi pi-check" actionListener="#{meusLivrosController.savelivro}"
									 update="manage-livro-content" process="manage-livro-content @this"/>
					<p:commandButton value="Cancel" icon="pi pi-times" onclick="PF('managelivroDialog').hide()"
									 class="ui-button-secondary"/>
				</f:facet>

			</p:dialog>
	
			<p:confirmDialog widgetVar="deletelivroDialog" showEffect="fade" width="300"
							 message="Delete the livro?" header="Confirm" severity="warn">
				<p:commandButton value="Yes" icon="pi pi-check" actionListener="#{meusLivrosController.deletelivro}"
								 process="@this" oncomplete="PF('deletelivroDialog').hide()"/>
				<p:commandButton value="No" type="button" styleClass="ui-button-secondary" icon="pi pi-times"
								 onclick="PF('deletelivroDialog').hide()"/>
			</p:confirmDialog>
	
			<p:confirmDialog global="true" showEffect="fade" width="300">
				<p:commandButton value="Yes" type="button" styleClass="ui-confirmdialog-yes" icon="pi pi-check"/>
				<p:commandButton value="No" type="button" styleClass="ui-confirmdialog-no ui-button-secondary"
								 icon="pi pi-times"/>
			</p:confirmDialog>
		</div>
	</h:form>
</h:body>

</html>
